<!-- == README.md == -->
# Multiplier Generator Service

HTTP-сервис и CLI-утилита для генерации числовых множителей на основе различных алгоритмов.  
Предназначен для тестирования сходимости RTP для различных сценариев.

---

## Сборка

```bash
make all
```

Бинарники будут созданы в папке `bin/`:

- `bin/multgen` — генератор множителей
- `bin/check` — утилита для проверки RTP на сгенерированной последовательности

---

## Запуск

### HTTP-сервер (по умолчанию)

Запускает сервер на `localhost:64333`, возвращает множитель по запросу `/get`.

```bash
bin/multgen -rtp=0.95
```
<span style="font-size: 0.8em; color: #666;">**Note:** Для соответствия ТЗ доступен запуск из корня проекта: ```bash go run -- . -rtp=<значение>```</span>

Пример запроса:
```bash
curl http://localhost:64333/get
# {"result":10000}
```

---

### CLI-режим

Генерирует N множителей и выводит их в stdout — один на строку.

```bash
echo 10 | bin/multgen -rtp=0.9 -cli
```

---

### Проверка RTP с `bin/check`

Утилита `check` моделирует "клиентскую последовательность" и вычисляет фактический RTP.
`check` использует псевдослучайную последовательность значений в диапазоне `[min, max]`.


#### Пример:

```bash
$ echo 10000 | bin/multgen -cli -algo=max -rtp=0.5 | bin/check
0.5090351367742486
```

---

## Флаги

### Для `multgen`:

| Флаг | Описание |
|------|----------|
| `-rtp` | Целевой RTP (в `(0.0, 1.0]`) — **обязательный** |
| `-algo` | Алгоритм генерации |
| `-cli` | CLI-режим: читает N из stdin, выводит N множителей в stdout |
| `-http` | Адрес HTTP-сервера (по умолчанию `localhost:64333`) |

> Подробнее ```bin/multgen --help```

### Для `check`:

| Флаг | Описание |
|------|----------|
| `-min` | Минимальное значение в последовательности (по умолчанию 1.0) |
| `-max` | Максимальное значение в последовательности (по умолчанию 10000.0) |
| `-m`   | Если указан — трансформация `x * m`, иначе `x` |

> Подробнее ```bin/check --help```

---

## Структура проекта

- `cmd/multgen/` — точка входа
- `internal/cmd/multgen/` — логика main (вынесена для переиспользования)
- `internal/api/` — HTTP-обработчики
- `internal/config/` — конфигурация и флаги
- `internal/solver/` — реализация алгоритмов генерации множителей
- `main.go` — для копирования на тестовую платформу
- `pkg/app/` — импорты для main.go, чтобы можно было запустить из другого модуля 

---

## Замечания

- Алгоритмы реализованы "as is" — для разных теоретических сценариев.
- ЛЮБОЙ алгоритм бессилен пред последовательностью состоящей только из 10000. 
В этом случае, `RTP` ВСЕГДА равен 0, вне зависимости от `multiplier`.
